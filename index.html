<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sapienza Open Notes ğŸ“</title>
  <link rel="stylesheet" href="./web_pages/style.css">
</head>
<body>
  <header>
    <h1>Sapienza Open Notes ğŸ“</h1>
    <p>Appunti aperti e collaborativi della Sapienza UniversitÃ  di Roma </p>
  </header>

  <main>
    <section>
      <h2>ğŸ“– Il Progetto</h2>
      <p>
        <span class="highlight">Sapienza Open Notes</span> nasce per raccogliere, organizzare e condividere 
        appunti e materiali prodotti dagli studenti della Sapienza UniversitÃ  di Roma.  
        Lâ€™obiettivo Ã¨ creare un archivio <strong>libero, aperto e collaborativo</strong> che faciliti lo studio 
        e favorisca la cooperazione tra studenti e ricercatori di tutte le discipline.
      </p>
      <p>
        Tutti gli appunti sono redatti in <strong>LaTeX</strong>, un linguaggio tipografico ampiamente utilizzato 
        in ambito accademico, che garantisce <em>chiarezza, uniformitÃ  e qualitÃ  professionale</em> nella scrittura scientifica.  
      </p>
      <p>
        Il progetto sfrutta il <strong>versionamento con Git</strong>, cosÃ¬ da poter aggiornare, migliorare o correggere i file 
        LaTeX nel tempo, mantenendo uno storico delle modifiche e permettendo a piÃ¹ persone di collaborare sugli stessi corsi 
        in modo ordinato e trasparente.
      </p>
    </section>

    <section>
      <h2>ğŸ’¡ Prendere appunti in modo smart</h2>
      <p>
        Per ottenere appunti chiari, completi e facilmente condivisibili, molti studenti trovano utile combinare diversi strumenti durante la lezione:
      </p>
      <ul>
        <li>Registrare lâ€™audio della lezione per catturare spiegazioni dettagliate e commenti del docente.</li>
        <li>Annotare manualmente formule, schemi e grafici alla lavagna, cosÃ¬ da integrare il materiale visivo e personale.</li>
        <li>Successivamente, utilizzare strumenti di trascrizione AI per convertire lâ€™audio in testo e combinare automaticamente le tue annotazioni in un documento <strong>LaTeX</strong> chiaro e ben strutturato.</li>
      </ul>
      <p>
        Questo approccio permette di produrre appunti di qualitÃ  rapidamente, con un flusso di lavoro collaborativo e facilmente gestibile tramite <strong>git</strong>.
      </p>
      <p>
        <a href="./web_pages/how_to_take_notes.html" class="notes-link">ğŸ“„ Scopri come applicarlo</a>
      </p>
    </section>


    <section>
      <h2>ğŸ¤ Collabora con noi</h2>
      <p>
        <span class="highlight">Sapienza Open Notes</span> Ã¨ aperto a tutti: aggiungi appunti, correggi errori o proponi miglioramenti.  
      </p>
      <div class="btn-container">
        <a href="https://github.com/filippodaminato/SapienzaOpenNotes" target="_blank" class="btn-primary">
          ğŸš€ Contribuisci su GitHub
        </a>
        <a href="./web_pages/tutorial.html" class="btn-secondary">
          ğŸ“˜ Leggi il tutorial
        </a>
      </div>
      <p class="text-center" style="font-style: italic; color: #555; margin-top: 1rem;">
        
      </p>
    </section>

    <section>
      <h2>ğŸ“‚ Materiale disponibile</h2>
      <input type="text" id="searchBox" placeholder="Cerca per titolo, professore o anno..." class="search-box">

      <div class="filters">
        <select id="filterFaculty"><option value="">Tutte le facoltÃ </option></select>
        <select id="filterLevel"><option value="">Tutti i livelli</option></select>
        <select id="filterYear"><option value="">Tutti gli anni</option></select>
        <select id="filterSemester"><option value="">Tutti i semestri</option></select>
        <select id="filterProfessor"><option value="">Tutti i professori</option></select>
      </div>

      <ul id="pdf-list" class="pdf-list">
        <li>Caricamento in corso...</li>
      </ul>
    </section>
  </main>

  <footer>
    <p>Â© 2025 Sapienza Open Notes â€“ Progetto open source degli studenti della Sapienza UniversitÃ  di Roma</p>
  </footer>

  <script>
    let pdfData = [];

    async function loadPDFs() {
      try {
        const response = await fetch('pdfs.json');
        pdfData = await response.json();
        populateFilters();
        renderList(pdfData);
      } catch (error) {
        console.error('Errore nel caricamento dei PDF:', error);
        document.getElementById('pdf-list').innerHTML = '<li>Errore nel caricamento dei file.</li>';
      }
    }

    function renderList(data) {
      const list = document.getElementById('pdf-list');
      list.innerHTML = '';

      if (data.length === 0) {
        list.innerHTML = '<li>Nessun file trovato.</li>';
        return;
      }

      data.forEach(pdf => {
        const li = document.createElement('li');
        li.innerHTML = `
          <div class="course-badge">
            <div class="course-summary">
              <div class="course-info">
                <span class="course-title">${pdf.title}</a>
                <small style="color:#aaa">â€“ ${pdf.professor}</small>
              </div>
              <div class="course-filters">
                <span class="pdf-badge faculty">${pdf.faculty || ''}</span>
                <span class="pdf-badge level">${pdf.level || ''}</span>
              </div>
            </div>
            <div class="course-details">
              <div><strong>Anno:</strong> ${pdf.year || '-'}</div>
              <div><strong>Semestre:</strong> ${pdf.semester || '-'}</div>
              <div><strong>Ultimo aggiornamento:</strong> ${pdf.last_edit_date || '-'}</div>
              <a href="${pdf.file_name}" target="_blank" class="download-btn">ğŸ“„ Scarica PDF</a>
            </div>
          </div>
        `;
        list.appendChild(li);
      });
    }

              // <div><strong>Contributors:</strong> 
              //   ${pdf.contributors.map(c => `<a href="${c.profile_url}" target="_blank">${c.name}</a>`).join(', ')}
              // </div>


    function populateFilters() {
      const facultySet = new Set();
      const levelSet = new Set();
      const professorSet = new Set();
      const yearSet = new Set();
      const semesterSet = new Set();

      pdfData.forEach(pdf => {
        if(pdf.faculty) facultySet.add(pdf.faculty);
        if(pdf.level) levelSet.add(pdf.level);
        if(pdf.professor) professorSet.add(pdf.professor);
        if(pdf.year) yearSet.add(pdf.year);
        if(pdf.semester) semesterSet.add(pdf.semester);
      });

      const facultySelect = document.getElementById('filterFaculty');
      const levelSelect = document.getElementById('filterLevel');
      const professorSelect = document.getElementById('filterProfessor');
      const yearSelect = document.getElementById('filterYear');
      const semesterSelect = document.getElementById('filterSemester');

      facultySet.forEach(f => facultySelect.appendChild(new Option(f, f)));
      levelSet.forEach(l => levelSelect.appendChild(new Option(l, l)));
      professorSet.forEach(p => professorSelect.appendChild(new Option(p, p)));
      yearSet.forEach(y => yearSelect.appendChild(new Option(y, y)));
      semesterSet.forEach(s => semesterSelect.appendChild(new Option(s, s)));

      // Event listeners per filtri
      [facultySelect, levelSelect, professorSelect, yearSelect, semesterSelect].forEach(el =>
        el.addEventListener('change', filterList)
      );
      document.getElementById('searchBox').addEventListener('input', filterList);
    }

    function filterList() {
      const query = document.getElementById('searchBox').value.toLowerCase();
      const facultyFilter = document.getElementById('filterFaculty').value;
      const levelFilter = document.getElementById('filterLevel').value;
      const professorFilter = document.getElementById('filterProfessor').value;
      const yearFilter = document.getElementById('filterYear').value;
      const semesterFilter = document.getElementById('filterSemester').value;

      const filtered = pdfData.filter(pdf => {
        return (
          (pdf.title.toLowerCase().includes(query) ||
          pdf.professor.toLowerCase().includes(query) ||
          pdf.year.toLowerCase().includes(query)) &&
          (facultyFilter === "" || pdf.faculty === facultyFilter) &&
          (levelFilter === "" || pdf.level === levelFilter) &&
          (professorFilter === "" || pdf.professor === professorFilter) &&
          (yearFilter === "" || pdf.year === yearFilter) &&
          (semesterFilter === "" || pdf.semester === semesterFilter)
        );
      });
      renderList(filtered);
    }


    loadPDFs();
    
    document.querySelectorAll('.course-badge').forEach(badge => {
      const summary = badge.querySelector('.course-summary');
      const details = badge.querySelector('.course-details');
      // const icon = badge.querySelector('.toggle-icon');

      summary.addEventListener('click', () => {
        const expanded = details.classList.toggle('expanded');
        // icon.textContent = expanded ? 'â¬†ï¸' : 'â¬‡ï¸';
      });
    });
</script>
</body>
</html>
